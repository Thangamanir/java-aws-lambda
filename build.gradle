apply plugin: 'java'

dependencies {
    compile fileTree(dir: 'jars', include: '*.jar')
}

test{
	exclude 'src/test/**'
}
task buildZip(type: Zip) {
    from compileJava
    from processResources
    into('lib') {
        from configurations.runtimeClasspath
    }
    
}

/*jar {
    manifest.attributes(
            // results in "Class-Path: guava-15.0.jar"
            'Class-Path': configurations.runtime.files.collect { it.name }.join(' ')
    )
}*/

task customFatJar(type: Jar) {
    manifest {
        attributes 'Main-Class': 'com.amazonaws.lambda.demo.TestCaseStreamHandler',
        'Class-Path': configurations.runtime.files.collect { it.name }.join(' ')
    }
    baseName = 'all-in-one-jar'
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
    with jar
}
build.dependsOn buildZip
